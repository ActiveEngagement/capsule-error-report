(("undefined"!==typeof self?self:this)["webpackJsonpCapsuleErrorReport"]=("undefined"!==typeof self?self:this)["webpackJsonpCapsuleErrorReport"]||[]).push([[2],{"0ca9":function(t,e,r){},8166:function(t,e,r){},9349:function(t,e,r){"use strict";var n=r("e966"),i=r.n(n);i.a},"9c82":function(t,e,r){},b09a:function(t,e,r){"use strict";var n=r("e5df"),i=r.n(n);i.a},c2bf:function(t,e,r){"use strict";var n=r("8166"),i=r.n(n);i.a},c942:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"editor"},[r("editor-toolbar",{ref:"toolbar",attrs:{value:t.value,title:t.currentFilename,activity:t.isLinting,"page-controls":t.pageControls},on:{"update:title":function(e){t.currentFilename=e},input:t.onToolbarInput,lint:t.onClickLint,new:t.onClickNew,open:t.onClickOpen,close:t.onClickClose,save:t.onClickSave,"save-as":t.onClickSaveAs,"export-errors":t.onExportErrors}}),r("div",{staticClass:"editor-field-container"},[r("editor-field",t._b({ref:"editor",on:{input:t.onEditorInput},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"editor-field",t.mergedOptions,!1)),r("input",{ref:"file",staticClass:"d-none",attrs:{type:"file"},on:{input:t.onFileSelected}})],1)],1)},i=[],o=r("5176"),s=r.n(o),l=r("795b"),a=r.n(l),c=r("0055"),u=r.n(c),h=r("ff9c"),d=r.n(h),m=r("4a31");const p="CodeMirror-lint-errors";class f{constructor(t,e){if("object"!==typeof e)throw new Error("The options must be a JSON object.");this.cm=t,this.errors=[],this.options=e}value(t,...e){const r=this.option(t);return"function"===typeof r?r(this.cm,...e):r}option(t,e){return this.getOption(t,e)}callback(t,...e){const r=this.option(t);if("function"===typeof r)return r(...e)}setOption(t,e){this.options[t]=e}getOption(t,e){const r=this.options[t];return void 0===r?e:r}request(t,e){return this.callback("onStart"),new a.a((r,n)=>{d.a.post(this.value("url"),t||this.value("data"),e||this.value("options")||this.options).then(t=>{this.errors=[],this.response=t=this.option("transformResponse")?this.callback("transformResponse",t):t.data,r(t),this.callback("onSuccess",t),this.callback("onComplete",!0,t)},t=>{this.response=null;const e=this.option("transformResponseError")?this.callback("transformResponseError",t):t.response.data.errors||t.response.data;Object(m["d"])(e)&&(this.errors=e),n(t),this.callback("onError",t),this.callback("onComplete",!1,t)})})}findNearbyErrors(t){function e(e){return e&&e.from.line<=t.line&&e.to.line>=t.line&&e.from.ch<=t.ch&&e.to.ch>=t.ch}return this.errors.filter(t=>{return t.match&&(e(t.match.open)||e(t.match.close))})}get id(){return this.constructor.id}get cm(){return this.$cm}set cm(t){this.$cm=t}get options(){return this.$options}set options(t){this.$options=t}get response(){return this.$response}set response(t){this.$response=t}get errors(){return this.$errors}set errors(t){this.$errors=t}get hasGutter(){const t=this.cm.getOption("gutters");for(var e=0;e<t.length;++e)if(t[e]===p)return!0;return!1}static get id(){return p}}var v=r("3028"),b=r("d6e4");const g="CodeMirror-lint-error-underline";function k(t,e){t.lint.cm.clearGutter(t.lint.id),(e||t.lint.errors).forEach(t=>{t.open&&t.open.clear(),t.close&&t.close.clear()})}function $(t,e){const r=document.createElement("div");return r.className="CodeMirror-lint-tooltip",r.innerHTML=t,r}function C(t){const e=document.createElement("div");return e.className="CodeMirror-lint-error-icon",e.innerHTML=v["a"].icon(b["faBug"]).html,e.title=`${t.line},${t.column} :: ${t.code} ${t.msg} (${t.rule})`,e.error=t,e}function y(t){const e=t.lint.cm.getViewport();Object(m["d"])(t.lint.errors)&&(t.lint.errors.forEach(r=>{t.lint.cm.setGutterMarker(r.line-1,t.lint.id,C(r)),r.match=u.a.findMatchingTag(t.lint.cm,{line:r.line-1,ch:r.column},e),r.match&&(r.match.open&&(r.open=t.lint.cm.markText(r.match.open.from,r.match.open.to,{className:"CodeMirror-lint-error-underline"})),r.match.close&&(r.close=t.lint.cm.markText(r.match.close.from,r.match.close.to,{className:g})))}),t.lint.errors.length&&t.lint.errors[0].match&&(t.lint.cm.scrollIntoView(t.lint.errors[0].match.open||t.lint.errors[0].match.close,t.lint.cm.getScrollInfo().clientHeight/2),setTimeout(()=>{t.lint.cm.setCursor(t.lint.errors[0].line-1,t.lint.errors[0].column)})))}function E(t){t.lintErrorTooltip&&(t.lintErrorTooltip.parentNode.removeChild(t.lintErrorTooltip),t.lintErrorTooltip=null);const e=t.state.lint.findNearbyErrors(t.getCursor()),r=e.reduce((t,e)=>{return null===t||t>e.column?e.column:t},null)-1,n=e.reduce((t,e)=>{return null===t||t>e.line?e.line:t},null)-1,i=e.reduce((t,e)=>{return t.push(`${e.line},${e.column} :: ${e.code} ${e.msg} (${e.rule})`),t},[]).join("<br>");e.length&&(t.lintErrorTooltip=$(i,t),t.addWidget({ch:r,line:n},t.lintErrorTooltip,!0))}u.a.defineOption("lint",!1,function(t,e,r){r&&r!==u.a.Init&&(k(t.state),t.off("cursorActivity",E),delete t.state.lint),e&&(t.state.lint=new f(t,e||(e={})),t.on("cursorActivity",E),t.on("inputRead",(t,e)=>{"paste"===e.origin&&(t.state.lint.errors=[],t.lint())}),e.errors&&e.errors.length&&(t.state.lint.errors=e.errors,y(t.state)))}),u.a.defineExtension("lint",function(t,e){return new a.a((r,n)=>{const i=this.state.lint.errors;this.state.lint.request(t,e).then(t=>{k(this.state,i),r(this.state.lint)},t=>{k(this.state,i),this.state.lint.cm.operation(()=>{y(this.state),n(t)})})})});var S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("textarea",{domProps:{value:t.value}})},_=[],x=(r("59d9"),r("93a0"),r("e59b"),r("b581"),r("89cc"),r("3206"),r("d439"),r("29db"),r("de5a"),r("335e"),r("1517"),r("f991"),r("8720"),r("ef22"),r("1eaf"),r("a243"),r("5827"),r("a676"),r("667b"),r("768f")),O={inheritAttrs:!1,name:"editor-field",mixins:[x["a"]],props:{defaultOptions:{type:Object,default(){return{mode:"htmlmixed",theme:"dracula",indentAuto:!0,newlineAndIndent:!0,lineNumbers:!0,lineWrapping:!0,indentUnit:4}}},height:{type:String,default:"100%"},width:{type:String,default:"100%"}},computed:{options(){return Object(m["a"])({},this.defaultOptions,this.$attrs)}},mounted(){this.cm=u.a.fromTextArea(this.$el,this.options),this.cm.on("change",()=>this.$emit("input",this.cm.getValue())),this.cm.setSize(this.width,this.height)},data(){return{cm:null}}},w=O,T=(r("cc2e"),r("2877")),N=Object(T["a"])(w,S,_,!1,null,null,null);N.options.__file="EditorField.vue";var A=N.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("navbar",{staticClass:"editor-toolbar",attrs:{variant:"dark","bg-dark":""}},[r("btn-activity",{ref:"lint",staticClass:"mr-auto",attrs:{size:"sm",variant:"light",disabled:t.isLintingDisabled(),activity:t.activity},on:{click:function(e){return e.preventDefault(),t.onClickLint(e)}}},[r("icon",{attrs:{icon:"bug"}}),t.errors&&t.errors.length?r("badge",{staticClass:"position-absolute",attrs:{label:t.errors.length,variant:"danger",pill:""}}):t._e()],1),r("div",{staticClass:"editor-toolbar-title"},[r("input",{attrs:{type:"text",placeholder:"Untitled Document"},domProps:{value:t.title},on:{input:t.onInput}})]),t.pageControls?r("btn-dropdown",{staticClass:"editor-toolbar-actions ml-auto",attrs:{size:"sm",variant:"light",align:"right"}},[r("icon",{attrs:{slot:"label",icon:"cog"},slot:"label"}),r("editor-toolbar-menu-item",{attrs:{label:"New File",hotkeys:["ctrl","N"]},on:{click:function(e){e.preventDefault(),t.$emit("new")}}}),r("editor-toolbar-menu-item",{attrs:{label:"Open",hotkeys:["ctrl","O"]},on:{click:function(e){e.preventDefault(),t.$emit("open")}}}),r("editor-toolbar-menu-item",{attrs:{label:"Save",hotkeys:["ctrl","S"]},on:{click:function(e){e.preventDefault(),t.$emit("save")}}}),r("editor-toolbar-menu-item",{attrs:{label:"Save As...",hotkeys:["shift","ctrl","S"]},on:{click:function(e){e.preventDefault(),t.$emit("save-as")}}}),r("editor-toolbar-menu-item",{attrs:{label:"Close",hotkeys:["ctrl","Q"]},on:{click:function(e){e.preventDefault(),t.$emit("close")}}}),t.errors&&t.errors.length?[r("dropdown-menu-divider"),r("editor-toolbar-menu-item",{attrs:{label:"Export Errors",hotkeys:["ctrl","X"]},on:{click:function(e){e.preventDefault(),t.$emit("export-errors")}}})]:t._e()],2):t._e()],1)},M=[],j={prefix:"fas",iconName:"alt",icon:[20,18,[],null,"M.027.656h6.773l7.805 15.609h5.379v1.734h-6.785l-7.805-15.609h-5.367v-1.734zm11.848 0h8.109v1.734h-8.109v-1.734z"]},D={prefix:"fas",iconName:"ctrl",icon:[15,9,[],null,"M.602 7.594l6.938-6.938 6.949 6.938-1.23 1.23-5.719-5.719-5.707 5.719-1.23-1.23z"]},I={prefix:"fas",iconName:"shift",icon:[20,19,[],null,"M.027 10.176l9.973-9.973 9.984 9.973h-4.992v8.824h-9.973v-8.824h-4.992zm9.973-7.922l-6.621 6.621h3.082v8.684h7.09v-8.684h3.07l-6.621-6.621z"]},L=r("1588"),z=r("954d"),B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dropdown-menu-item",{on:{click:function(e){t.$emit("click",e)}}},[r("span",[t._t("default",[t._v(t._s(t.label))])],2),t.hotkeys?r("code",t._l(t.hotkeys,function(t,e){return r("editor-hotkey",{key:e,attrs:{icon:t.length>1?t:null,label:1===t.length?t:null}})}),1):t._e()])},R=[],V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("kbd",[t._t("default",[t._v(t._s(t.label))]),t.icon?r("icon",{attrs:{icon:t.icon}}):t._e()],2)},H=[],q=r("0f9f"),G={name:"editor-hotkey",components:{Icon:q["a"]},props:{label:[Number,String],icon:[Array,String]}},J=G,K=(r("c2bf"),Object(T["a"])(J,V,H,!1,null,null,null));K.options.__file="EditorHotkey.vue";var P=K.exports,Q=r("ec92"),U={name:"editor-toolbar-menu-item",props:{label:String,hotkeys:Array},components:{EditorHotkey:P,DropdownMenuItem:Q["a"]}},W=U,X=(r("b09a"),Object(T["a"])(W,B,R,!1,null,null,null));X.options.__file="EditorToolbarMenuItem.vue";var Y=X.exports,Z=r("bf44"),tt=r("d419"),et=r("da10"),rt=r("9989"),nt=r("2edc");Z["c"].add(b["faBug"]),Z["c"].add(tt["faCog"]),Z["c"].add(j),Z["c"].add(D),Z["c"].add(I);var it={name:"editor-toolbar",components:{Icon:q["a"],BtnActivity:et["a"],Badge:L["a"],Navbar:z["a"],BtnDropdown:rt["a"],DropdownMenuDivider:nt["a"],EditorToolbarMenuItem:Y},props:{activity:Boolean,errors:Array,pageControls:{type:Boolean,default:!0},value:String,title:{type:String,default:null}},methods:{isLintingDisabled(){return!this.value||""===this.value},onInput(t){this.$emit("input",t.target.value),this.$emit("update:title",t.target.value)},onClickLint(t){this.isLintingDisabled()||this.$emit("lint",t)}}},ot=it,st=(r("9349"),Object(T["a"])(ot,F,M,!1,null,null,null));st.options.__file="EditorToolbar.vue";var lt=st.exports,at=r("9d38"),ct={name:"editor",components:{EditorField:A,EditorToolbar:lt},props:{errors:{type:Array,default(){return[]}},contents:String,extraKeys:Object,filename:String,gutters:Array,lint:Object,matchTags:Object,options:Object,pageControls:{type:Boolean,default:!0}},computed:{mergedOptions(){return Object(m["a"])({foldGutter:!0,matchTags:s()({bothTags:!0},this.matchTags),gutters:this.gutters||["CodeMirror-linenumbers",f.id,"CodeMirror-foldgutter"],extraKeys:s()({"Ctrl-N":this.onClickNew,"Ctrl-O":this.onClickOpen,"Ctrl-S":this.onClickSave,"Ctrl-Q":this.onClickClose,"Shift-Ctrl-S":this.onClickSaveAs,"Ctrl-J":"toMatchingTag","Ctrl-Space":"autocomplete","Ctrl-V":()=>{this.$refs.toolbar.$refs.lint.$el.click()}},this.extraKeys),lint:s()({url:"lint",errors:this.errors,data:t=>{return{html:t.getValue()}},onStart:()=>{this.isLinting=!0},onComplete:()=>{this.isLinting=!1},onSuccess:()=>{this.currentErrors=[],this.$emit("lint-success")},onError:t=>{406===t.response.status&&this.$emit("lint-error",t,this.currentErrors=t.response.data.errors)}},this.lint)},this.options)}},methods:{onToolbarInput(){this.onEditorInput()},onEditorInput(){this.$nextTick(()=>{this.$emit("input",{contents:this.value,filename:this.currentFilename})})},onExportErrors(){console.log("export errors")},onFileSelected(t){const e=new FileReader;e.onload=(t=>{this.$refs.editor.cm.setValue(t.target.result),this.$refs.editor.cm.lint()}),e.readAsText(t.target.files[0]),this.currentFilename=t.target.files[0].name},onClickNew(){this.currentFilename=null,this.$refs.editor.cm.setValue(this.value=""),this.$refs.editor.cm.focus(),this.$emit("new")},onClickSave(){this.currentFilename?(this.$emit("download",this.value,this.currentFilename),this.$emit("save",this.value,this.currentFilename)):this.onClickSaveAs()},onClickSaveAs(){this.$prompt("Save File As",at["a"],{content:{on:{keypress:t=>{13===t.keyCode&&(t.target.closest(".modal-dialog").querySelector(".btn-primary").click(),t.preventDefault())}},propsData:{label:"Enter the name of the file",value:this.currentFilename}}}).then(t=>{this.$emit("download",this.value,this.currentFilename),this.$emit("save-as",this.value,this.currentFilename)})},onClickOpen(t){this.$refs.file.click()},onClickClose(){this.$emit("close")},onClickLint(t){this.$refs.editor.cm.lint()}},data(){return{value:this.contents,isLinting:!1,currentErrors:[],currentFilename:this.filename}},mounted(){this.$nextTick(()=>{this.$refs.editor.cm.focus(),this.$refs.editor.cm.setSize("100%",`calc(100% - ${this.$el.querySelector(".editor-toolbar").clientHeight}px)`),this.$refs.editor.cm.getValue()&&!this.errors.length&&this.$refs.editor.cm.lint()})}},ut=ct,ht=(r("ef29"),Object(T["a"])(ut,n,i,!1,null,null,null));ht.options.__file="Editor.vue";e["default"]=ht.exports},cc2e:function(t,e,r){"use strict";var n=r("9c82"),i=r.n(n);i.a},e5df:function(t,e,r){},e966:function(t,e,r){},ef29:function(t,e,r){"use strict";var n=r("0ca9"),i=r.n(n);i.a}}]);
//# sourceMappingURL=CapsuleErrorReport.umd.min.2.js.map