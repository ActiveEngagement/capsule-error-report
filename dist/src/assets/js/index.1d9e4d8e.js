(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)o=s[u],i[o]&&d.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={index:0},i={index:0},a=[];function s(e){return l.p+"src/assets/js/"+({}[e]||e)+"."+{"chunk-9f7c3ee0":"e2788a22"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-9f7c3ee0":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="src/assets/css/"+({}[e]||e)+"."+{"chunk-9f7c3ee0":"a1109fe0"}[e]+".css",i=l.p+r,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===i))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===r||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,delete o[e],p.parentNode.removeChild(p),n(a)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)}).then(function(){o[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=a);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e),c=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}i[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="http://capsule.actengage.com/dist/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"4da6":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("error-report",{attrs:{"api-key":"PtuWokeDGzxhXPYxAnvsEcYf",filename:"test","page-controls":!1}},[n("textarea",[e._v('<!DOCTYPE html>\n<html lang="en" dir="ltr">\n    <head>\n        <meta charset="utf-8">\n        <title>Basic Example</title>\n        <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.css"></link>\n        <style media="screen">\n            html, body {\n                font-famiy: Serif;\n            }\n\n            * {\n                font-famiy: Serif;\n            }\n\n            .container {\n                max-width: 550px;\n            }\n        </style>\n    </head>\n    <body>\n        <div class="container">\n            <h1 class="mt-3">This is a header</h1>\n            <h2>Some subtext goes here</h2>\n            <img src="https://placeimg.com/640/480/animals" class="img-fluid mb-3" />\n            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque molestie urna orci, ac ullamcorper elit fermentum nec. Nam lacus orci, facilisis non dapibus et, commodo eget lectus. Phasellus eu tempor nibh, pellentesque aliquam nunc. Etiam tempus non risus in tempus. Sed nunc lacus, congue ut feugiat sit amet, maximus et tellus. </p>\n            <p>Phasellus ultrices elit magna, in vulputate tellus faucibus quis. Aliquam ac tellus eget nibh varius interdum quis vitae urna. Aenean et aliquam odio, fringilla tempus ex. Curabitur lorem augue, placerat at metus non, lobortis congue justo. Donec mattis cursus lacinia. Suspendisse eget urna eros. Phasellus ultricies nisl et mauris sagittis lacinia. Sed lobortis arcu quis tempus rutrum.</p>\n            <h3>Links</h3>\n            <a href="/some/absolute/path">/some/absolute/path</a><br>\n            <a href="some/relative/path">some/relative/path</a><br>\n            <a href="../some/relative/path">../some/relative/path</a><br>\n            <a href="./some/relative/path">./some/relative/path</a><br>\n            <a href="http://google.com/some/absolute/path">http://google.com/some/absolute/path</a><br>\n            <a href="file://some/absolute/path">file://some/absolute/path\n        </div>\n    </body>\n</html>\n')])])],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"error-report"},[e.currentErrors?e.currentErrors.length?[e.editMode?n("div",[n("code-editor",{attrs:{"page-controls":!1,errors:e.currentErrors,contents:e.currentContents,filename:e.currentFilename,lint:e.lintOptions},on:{"lint-errors":e.onLintError,"lint-success":e.onLintSuccess,close:function(t){e.editMode=!1}},model:{value:e.editor,callback:function(t){e.editor=t},expression:"editor"}})],1):n("div",{staticClass:"error-report-list"},[n("div",{staticClass:"jumbo-icon jumbo-icon-danger"},[n("icon",{attrs:{icon:"bug"}})],1),n("h1",{staticClass:"display-5 text-center mb-4"},[e._v("\n        Ooops, we found some errors...\n      ")]),n("card",{staticClass:"mb-4"},[n("card-body",[n("h4",[e._v("Important")]),n("p",{staticClass:"error-report-text"},[e._v("\n            The following errors need fixed before the document is considered valid.\n          ")]),n("ul",{staticClass:"error-report-errors"},e._l(e.currentErrors,function(t){return n("li",[n("a",{attrs:{href:"#"},domProps:{innerHTML:e._s(e.format(t))},on:{click:function(n){e.showError(t)}}})])}),0)])],1),n("btn",{attrs:{size:"lg",variant:"danger",block:""},on:{click:function(t){t.preventDefault(),e.editMode=!0}}},[n("icon",{attrs:{icon:"tools"}}),e._v(" Fix Errors\n      ")],1)],1)]:e.revision?[n("div",{staticClass:"error-report-revision"},[n("div",{staticClass:"jumbo-icon"},[n("icon",{attrs:{icon:"envelope"}})],1),n("h1",{staticClass:"display-5 text-center mb-4"},[e._v("\n        Revision Sent!\n      ")]),n("p",{staticClass:"error-report-text"},[e._v("\n        Your revision has been successfully sent!\n      ")])])]:[n("div",{staticClass:"error-report-fixed"},[n("div",{staticClass:"jumbo-icon"},[n("icon",{attrs:{icon:"clipboard-check"}})],1),n("h1",{staticClass:"display-5 text-center mb-4"},[e._v("\n        Your document is valid!\n      ")]),n("card",{staticClass:"mb-4"},[n("card-body",[n("h4",[e._v("Important")]),n("p",[e._v("\n            The errors in the document have been fixed but you still need to send it back to ActiveEngagement for processing.\n          ")]),n("ol",{staticClass:"mb-0 pl-3"},[n("li",{staticClass:"mb-3"},[e._v("\n              You can automatically send it back directly back to us for processing.\n            ")]),n("li",[e._v("\n              Or download it and manually send it as an email attachment.\n            ")])])])],1),n("btn-activity",{attrs:{activity:e.activity,size:"lg",variant:"success",block:""},on:{click:function(t){return t.preventDefault(),e.onClickSend(t)}}},[n("icon",{attrs:{icon:"mail-bulk"}}),e._v(" Automatically Send File\n      ")],1),n("btn",{attrs:{size:"lg",variant:"secondary",block:"",outline:""},on:{click:function(t){return t.preventDefault(),e.onClickDownload(t)}}},[n("icon",{attrs:{icon:"download"}}),e._v(" Manually Download File\n      ")],1)],1)]:[n("activity-indicator",{attrs:{type:"spinner",label:"Checking for errors...",center:""}})]],2)},s=[],l=n("795b"),c=n.n(l),u=n("bc3a"),d=n.n(u),p=n("72fe"),h=n.n(p);function m(e,t){return new c.a((n,r)=>{e instanceof Blob||(e=new Blob([e],{type:"text/html"})),console.log(t);const o=document.createElement("a");o.setAttribute("href",URL.createObjectURL(e)),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),n()})}var f=n("9719"),v=n("179f"),b=n("ecee"),g=n("1971"),y=n("598c"),C=n("9863"),k=n("d2c9"),w=n("b623"),E=n("5b6d"),x=n("aa50"),_=n("ad3d"),S=n("a633"),j=n("e49e");b["c"].add(g["faBug"]),b["c"].add(w["faTools"]),b["c"].add(k["faEnvelope"]),b["c"].add(E["faDownload"]),b["c"].add(x["faMailBulk"]),b["c"].add(j["faClipboardCheck"]);var O={name:"ErrorReport",components:{Btn:f["a"],Card:v["a"],Icon:_["a"],CardBody:y["a"],BtnActivity:C["a"],ActivityIndicator:S["a"],CodeEditor:()=>n.e("chunk-9f7c3ee0").then(n.bind(null,"c942"))},props:{apiKey:{type:String,required:!0},baseUrl:{type:String,default:"http://capsule.actengage.com/api/v1"},contents:String,filename:String,errors:Array},data(){return{editor:null,editMode:!1,revision:null,activity:!1,originalErrors:this.errors,currentErrors:this.errors,originalFilename:this.filename,currentFilename:this.filename,originalContents:this.contents||this.getSlotContents(),currentContents:this.contents||this.getSlotContents()}},computed:{lintOptions(){return{baseURL:this.baseUrl,headers:{Authorization:`Bearer ${this.apiKey}`}}}},watch:{editor(e){this.currentFilename=e.filename,this.currentContents=e.contents}},mounted(){this.currentErrors||this.lint(),window.addEventListener("keydown",this.onKeydown)},beforeDestroy(){window.removeEventListener("keydown",this.onKeydown)},methods:{onClickSend(){this.activity=!0,this.createRevision().then(e=>{this.revision=e}).then(()=>{this.activity=!1})},onClickDownload(){m(this.currentContents,this.currentFilename)},onKeydown(e){27===e.keyCode&&(this.editMode=!1)},onLintError(e,t){this.currentErrors=t},onLintSuccess(e){this.currentErrors=[]},createRevision(){return new c.a((e,t)=>{d.a.post("revisions",{key:h()(this.currentFilename).toString(),filename:this.filename,revised_html:this.currentContents,original_html:this.originalContents},this.lintOptions).then(t=>{e(t.data)},e=>{t(e.response?e.response.data.errors||e.response.data:e)})})},lint(){return new c.a((e,t)=>{d.a.post("lint",{html:this.currentContents},this.lintOptions).then(e=>{this.currentErrors=[]},e=>{this.currentErrors=e.response.data.errors})})},getSlotContents(){return this.$slots.default?this.$slots.default.filter(e=>{return"textarea"===e.tag.toLowerCase()}).reduce((e,t)=>{return e+t.children.map(e=>{return e.text}).join("")},""):null},format(e){return`Line ${e.line},${e.column} :: ${e.code} ${e.msg} (${e.rule})`}}},A=O,L=(n("ed04"),n("2877")),P=Object(L["a"])(A,a,s,!1,null,null,null);P.options.__file="ErrorReport.vue";var T=P.exports,B={components:{ErrorReport:T},data(){return{errors:null,contents:null}}},M=B,q=Object(L["a"])(M,o,i,!1,null,null,null);q.options.__file="App.vue";var D=q.exports,$=n("67a6");r["a"].use($["a"]),r["a"].config.productionTip=!1,new r["a"]({render:e=>e(D)}).$mount("#app")},ed04:function(e,t,n){"use strict";var r=n("4da6"),o=n.n(r);o.a}});
//# sourceMappingURL=index.1d9e4d8e.js.map