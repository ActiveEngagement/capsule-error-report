(("undefined"!==typeof self?self:this)["webpackJsonpCapsuleErrorReport"]=("undefined"!==typeof self?self:this)["webpackJsonpCapsuleErrorReport"]||[]).push([[5],{"03bf":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("capsule-editor",{ref:"editor",attrs:{"demo-mode":"",team:t.team,errors:t.lint.errors,filename:t.lint.filename,"api-key":t.apiKey,contents:t.lint.html,environment:t.environment},on:{"lint-errors":t.onLintError,"lint-success":t.onLintSuccess,close:function(e){return t.$router.push({name:"home"})}},scopedSlots:t._u([{key:"success",fn:function(){return[s("slide-deck",{attrs:{active:t.active}},[s("div",{key:0},[s("div",{staticClass:"text-center position-relative"},[s("animate-css",{attrs:{name:"fade",up:"","leave-active-class":"position-absolute w-100 h-100"}},[t.activity||t.error?t._e():s("div",[s("img",{staticClass:"capsule-editor-modal-logo",attrs:{src:i("5f9a")}}),s("h1",{staticClass:"font-weight-light mb-4"},[t._v(" Document Fixed! ")]),s("h5",{staticClass:"font-weight-light mb-4 mx-5"},[t._v(" Do you want to automatically send it back to us or download it and manually email it as an attachment? ")]),s("div",{staticClass:"mb-5"},[s("btn",{staticClass:"mr-2",attrs:{size:"lg",variant:"success"},on:{click:t.onClickSend}},[s("icon",{attrs:{icon:"envelope"}}),t._v(" Send Now ")],1),s("btn",{attrs:{size:"lg",variant:"success",outline:""},on:{click:t.onClickDownload}},[s("icon",{attrs:{icon:"download"}}),t._v(" Download ")],1)],1)])]),s("animate-css",{attrs:{name:"fade",up:"","leave-active-class":"position-absolute w-100 h-100"}},[t.activity?s("div",{staticClass:"my-5 py-5"},[s("div",{staticClass:"my-5"},[s("hourglass",{attrs:{label:t.hourGlassLabel,animate:""}})],1)]):t.error?s("http-exception",{attrs:{error:t.error}},[s("div",{staticClass:"text-center"},[s("btn",{staticClass:"mr-2",attrs:{size:"lg"},on:{click:t.onClickSend}},[s("icon",{attrs:{icon:"redo"}}),t._v(" Try Again ")],1),s("btn",{attrs:{size:"lg",variant:"secondary"},on:{click:t.onClickCancel}},[s("icon",{attrs:{icon:"times-circle"}}),t._v(" Cancel ")],1)],1)]):t._e()],1)],1)]),s("div",{key:1},[s("animate-css",{attrs:{name:"fade","leave-active-class":"position-absolute w-100 h-100"}},[s("div",{staticClass:"text-center position-relative my-5"},[s("icon",{staticClass:"text-success",attrs:{icon:"check-circle",size:"6x"}}),s("h1",{staticClass:"font-weight-light mt-3 mb-0"},[t._v(" Thank You! ")]),s("h5",{staticClass:"font-weight-light my-4 mx-5 px-1"},[t._v(" Thank you for your assistance in fixing these errors. We have received your document and will process it shortly. ")]),s("btn",{attrs:{size:"lg"},on:{click:t.onClickClose}},[s("icon",{attrs:{icon:"window-close"}}),t._v(" Close Window ")],1)],1)])],1),s("div",{key:2},[s("div",{staticClass:"text-center position-relative my-5"},[s("icon",{staticClass:"text-secondary",attrs:{icon:["far","file-archive"],size:"6x"}}),s("h1",{staticClass:"font-weight-light mt-3 mb-0"},[t._v(" File Downloaded! ")]),s("h4",{staticClass:"font-weight-light mt-3 mb-1"},[t._v(" "+t._s(t.download.zipname)+" ")]),s("h5",{staticClass:"font-weight-light mb-4"},[t._v(" ("+t._s(t.download.size)+") ")]),s("div",[s("btn",{staticClass:"mr-2",attrs:{size:"lg",variant:"success"},on:{click:t.onClickDownloadAgain}},[s("icon",{attrs:{icon:"download"}}),t._v(" Download Again ")],1),s("btn",{attrs:{size:"lg"},on:{click:t.onClickClose}},[s("icon",{attrs:{icon:"window-close"}}),t._v(" Close Window ")],1)],1)],1)])])]},proxy:!0}]),model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})},n=[],a=i("2ef0"),o=i("6610"),r=i("5eb8"),l=i("9719"),c=i("b360"),d=i("a6f4"),h=i("566e"),u=i("ecee"),m=i("ad3d"),v=i("b702"),p=i("c074");u["c"].add(p["q"]),u["c"].add(p["g"]),u["c"].add(p["f"]),u["c"].add(p["c"]),u["c"].add(v["b"]),u["c"].add(p["r"]),u["c"].add(p["t"]);const f=Object(a["throttle"])(t=>{t&&t()},2500);var C={name:"Editor",components:{Btn:l["a"],Icon:m["a"],Hourglass:o["a"],SlideDeck:d["a"],AnimateCss:h["a"],HttpException:r["a"],CapsuleEditor:()=>Promise.all([i.e(1),i.e(8)]).then(i.bind(null,"9530"))},props:{lint:{type:Object,required:!0},team:{type:[Number,Object],required:!0},errors:Array,apiKey:{type:String,required:!0},environment:{type:String,default(){return"production"}}},data(){const t=this.errors||[];return{active:0,error:null,editor:null,revision:null,activity:!1,download:{blob:null,size:null,zipname:null,filename:null},hourGlassLabel:null,originalErrors:this.errors,currentErrors:t.slice(0),currentFilename:this.lint.filename,originalFilename:this.lint.filename,currentContents:this.lint.html||this.getSlotContents(),originalContents:this.lint.html||this.getSlotContents()}},computed:{httpRequestOptions(){return{baseURL:`http://api.thecapsule.${"production"===this.environment?"email":"test"}/v1`,headers:{Authorization:`Bearer ${this.apiKey}`}}}},watch:{editor({filename:t,contents:e}){this.currentFilename=t,this.currentContents=e}},mounted(){},methods:{formatBytes(t){const e=["Bytes","KB","MB","GB","TB"];if(0==t)return"0 Byte";const i=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,i),2)+" "+e[i]},onClickSend(){f(()=>{this.error=null,this.activity=!0,this.hourGlassLabel="Sending...",Object(c["c"])({filename:this.currentFilename,revised_html:this.currentContents,original_html:this.originalContents,team_id:"object"===typeof this.team?this.team.id:this.team},this.httpRequestOptions).then(t=>{f(()=>{this.active=1,this.error=null,this.activity=!1})},t=>{f(()=>{this.error=t,this.activity=!1})})})},onClickCancel(){this.error=null,this.active=0},onClickDownloadAgain(){Object(c["a"])(this.download.blob,this.download.zipname)},onClickDownload(){f(()=>{this.hourGlassLabel="Generating...",this.activity=!0,Object(c["d"])(this.currentContents,this.currentFilename).then(t=>{this.download.blob=t,this.download.filename=this.currentFilename,this.download.size=this.formatBytes(t.size),this.download.zipname=this.currentFilename.replace(/\.html/,".zip"),f(()=>{this.active=2,setTimeout(()=>{Object(c["a"])(t,this.download.zipname)},250)})})})},onClickClose(){window.close()},onLintError(t,e){this.currentErrors=e},onLintSuccess(t){this.currentErrors=[]},getSlotContents(){return this.$slots.default?this.$slots.default.filter(t=>"textarea"===t.tag.toLowerCase()).reduce((t,e)=>t+e.children.map(t=>t.text).join(""),""):null},format(t){return`Line ${t.line},${t.column} :: ${t.code} ${t.msg} (${t.rule})`}}},b=C,g=(i("f64a"),i("2877")),w=Object(g["a"])(b,s,n,!1,null,null,null);e["default"]=w.exports},"3fce":function(t,e,i){},f64a:function(t,e,i){"use strict";var s=i("3fce"),n=i.n(s);n.a}}]);
//# sourceMappingURL=CapsuleErrorReport.umd.min.editor.js.map